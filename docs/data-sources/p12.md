---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "crypto_p12 Data Source - crypto"
subcategory: ""
description: |-
  Reads a PKCS#12 (P12/PFX) file and exposes its contents
---

# crypto_p12 (Data Source)

Reads a PKCS#12 (P12/PFX) file and exposes its contents

## Example Usage

```terraform
# Generate certificates for the example
resource "tls_private_key" "server" {
  algorithm = "RSA"
  rsa_bits  = 2048
}

resource "tls_self_signed_cert" "server" {
  private_key_pem = tls_private_key.server.private_key_pem

  subject {
    common_name  = "server.example.com"
    organization = "Example Org"
  }

  validity_period_hours = 8760

  allowed_uses = [
    "key_encipherment",
    "digital_signature",
    "server_auth",
  ]
}

# Create a P12 to read
resource "crypto_p12" "source" {
  password = "changeit"

  entries = [
    {
      private_key       = tls_private_key.server.private_key_pem
      certificate       = tls_self_signed_cert.server.cert_pem
      certificate_chain = []
      alias             = "server"
    }
  ]
}

# Read the P12 file using data source
data "crypto_p12" "example" {
  p12      = crypto_p12.source.p12
  password = "changeit"
}

# Access the private key entry (if present)
output "private_key" {
  value     = data.crypto_p12.example.entry.private_key
  sensitive = true
}

output "certificate" {
  value = data.crypto_p12.example.entry.certificate
}

output "certificate_chain" {
  value = data.crypto_p12.example.entry.certificate_chain
}

# Access additional certificates
output "trusted_certs" {
  value = data.crypto_p12.example.additional_certs
}

# Read a passwordless P12 file
resource "crypto_p12" "passwordless_source" {
  password = ""

  entries = [
    {
      private_key       = tls_private_key.server.private_key_pem
      certificate       = tls_self_signed_cert.server.cert_pem
      certificate_chain = []
      alias             = "server"
    }
  ]
}

data "crypto_p12" "passwordless" {
  p12      = crypto_p12.passwordless_source.p12
  password = ""
}

# Use with another resource to create a new P12
resource "crypto_p12" "new_from_existing" {
  password = "newpassword"

  entries = [
    {
      private_key       = data.crypto_p12.example.entry.private_key
      certificate       = data.crypto_p12.example.entry.certificate
      certificate_chain = data.crypto_p12.example.entry.certificate_chain
      alias             = "migrated"
    }
  ]
}

# Example: Read P12 from file (if you have an existing P12 file)
# data "crypto_p12" "from_file" {
#   p12      = filebase64("${path.module}/existing-keystore.p12")
#   password = "changeit"
# }
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `p12` (String, Sensitive) Base64-encoded P12 file content to read

### Optional

- `password` (String, Sensitive) Password to unlock the P12 file. Use empty string for passwordless P12 files.

### Read-Only

- `additional_certs` (Attributes List) List of additional certificate entries extracted from the P12 file (see [below for nested schema](#nestedatt--additional_certs))
- `entry` (Attributes) The private key entry extracted from the P12 file (if present) (see [below for nested schema](#nestedatt--entry))
- `id` (String) Resource identifier

<a id="nestedatt--additional_certs"></a>
### Nested Schema for `additional_certs`

Read-Only:

- `certificate` (String) PEM-encoded certificate


<a id="nestedatt--entry"></a>
### Nested Schema for `entry`

Read-Only:

- `certificate` (String) PEM-encoded certificate
- `certificate_chain` (List of String) List of PEM-encoded certificates forming the certificate chain (excluding the main certificate)
- `private_key` (String, Sensitive) PEM-encoded private key
